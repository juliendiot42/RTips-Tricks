<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Julien Diot" />


<title>R Tips &amp; Tricks</title>

<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="index_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="index_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>
<link href="index_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="index_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="src/myStyle.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">R Tips &amp; Tricks</h1>
<h4 class="author">Julien Diot</h4>
<h4 class="date">Laste update: 2020/05/13</h4>

</div>


<style type="text/css">
/* add some CSS styling here */
</style>
<p><strong>Disclaimer</strong></p>
<p>The R Tips and Tricks presented here <strong>are just what I use</strong>, I don’t guarantee that this is the best way to do it. Moreover, new features are developed every days some stuffs presented here might be outdated in the future. If you have any comments or suggestions feel free to contact me: <a href="mailto:juliendiot@ut-biomet.org" class="email">juliendiot@ut-biomet.org</a> or post an issue on <a href="https://github.com/juliendiot42/RTips-Tricks/issues">GitHub</a>.</p>
<p><strong>Packages / R-options:</strong></p>
<pre class="r"><code>suppressPackageStartupMessages({
 library(fs)
 library(emo) # devtools::install_github(&quot;hadley/emo&quot;)
})

#  R options
options(max.print = 200)

# variables
R &lt;- fontawesome::fa(&quot;r-project&quot;, height = &quot;20px&quot;, fill = &quot;steelblue&quot;)</code></pre>
<!-- # Ideas -->
<!-- - rmarkdown: -->
<!--   - rmd templates -->
<!--   - Appendix `sessionInfo()` -->
<!-- - Cheat sheets -->
<!-- - technical monitoring -->
<!--   - CRAN alerts -->
<!--   - R bloggers -->
<!-- - Rstudio 1.3 -->
<!--   - https://rstudio.com/products/rstudio/download/preview/ -->
<!-- - Resources -->
<!--   - R bloggers -->
<!--   - Hadley's books -->
<!--   - https://holtzy.github.io/Pimp-my-rmd/ -->
<div id="r-studio-configuration" class="section level1">
<h1><span class="header-section-number">1</span> R-Studio configuration</h1>
<p>My favorite <svg style="height:20px;fill:steelblue;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> IDE is <a href="https://rstudio.com/products/rstudio/download/#download">R-Studio Desktop</a>. It is free and open-source and provides a lot of powerful features.</p>
<p>This section presents interesting R-Studio settings and my current setup.</p>
<p>To setup R-Studio go to: <code>Tools -&gt; Global Options...</code>.</p>
<p>A documentation for these settings is available <a href="https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio">here</a>. It might not be up to date but most of the settings are presented.</p>
<div class="note">
<p>Some useful R-Studio settings are not activated by default, I think it’s worth taking some time to check these settings.</p>
</div>
<div id="pane-layout-and-appearance" class="section level2">
<h2><span class="header-section-number">1.1</span> Pane layout and appearance</h2>
<p><code>Tools -&gt; Global Options... -&gt; Pane layout</code></p>
<p>In order to have <strong>more space for the editor</strong>, we can <strong>move the console on the top right corner</strong> and move the “Environment pane” to the bottom right.</p>
<p>Indeed, the panes on the bottom left do not need to be displayed constantly.</p>
<div class="figure">
<img src="src/img/RS-layout.png" alt="" />
<p class="caption">The editor takes the the whole windows</p>
</div>
<p>As you can see, I prefer <strong>dark theme</strong> because it’s more pleasant for my eyes. My favorite one is “Idle Fingers”. However, several other themes are available, some a light other are black.</p>
<p>I also use the font <a href="https://github.com/tonsky/FiraCode"><strong>“Fira code”</strong></a>, this font provide programming ligatures:</p>
<div class="row">
<div class="col-md-6">
<div class="figure">
<img src="src/img/fontCourrier.png" alt="" />
<p class="caption">Courier 10 pitch</p>
</div>
</div>
<div class="col-md-6">
<div class="figure">
<img src="src/img/fontFira.png" alt="" />
<p class="caption">Fira Code</p>
</div>
</div>
</div>
</div>
<div id="generalSettings" class="section level2">
<h2><span class="header-section-number">1.2</span> General settings</h2>
<div class="figure">
<img src="src/img/RS-general.png" alt="" />
<p class="caption">General settings</p>
</div>
<p>It is important to <strong>not</strong> restore or save your workspace at startup or end of the R session. By this way, you will always start R-Studio in a fresh and clean environment, and because you have saved your script you can regenerate the environment by running it. This is much better for the reproducibility of your work.</p>
</div>
<div id="code-settings" class="section level2 tabset tabset-fade tabset-pills">
<h2><span class="header-section-number">1.3</span> Code settings</h2>
<p><code>Tools -&gt; Global Options... -&gt; Code</code></p>
<p>I present here my personal settings. The highlighted lines are those I find interesting.</p>
<div id="editing" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Editing</h3>
<div class="figure">
<img src="src/img/RS-edit.png" alt="" />
<p class="caption">Editing Settings</p>
</div>
<ul>
<li><strong>Insert matching parens/quotes</strong>: When typing a paren, quote, or brace automatically insert a matching one and position the cursor between them.</li>
<li><strong>Auto-indent code after paste</strong>: Automatically execute a Reindent on blocks of R code pasted into the editor.</li>
<li><strong>Vertically align arguments in auto-indent</strong>: Preserve the current indentation level for function arguments split across multiple lines.</li>
<li><strong>Enable code snippets</strong>: see the corresponding <a href="#snippets">section</a>.</li>
</ul>
</div>
<div id="display" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Display</h3>
<center>
<img src="src/img/RS-display.png" />
</center>
<ul>
<li><strong>Highlight selected word</strong>: Add a background highlight effect to all instances of the currently selected word within the document. (Useful to find some variables in the code)</li>
<li><strong>Show line numbers</strong>: Show or hide line numbers within the left margin. (Useful for debugging)</li>
<li><strong>Show margin</strong>: Display a margin guide on the right-hand side of the source editor at the specified column. (The “good practices” require to have line smaller than 80 characters)</li>
<li><strong>Show whitespace characters</strong>: Display glyphs indicating where whitespace characters (tab, newline, etc.) are located in source documents. (Useful to detect “double spaces” and tabulation)</li>
<li><strong>Highlight R function calls</strong>: Highlight R functions. (Better distinction between functions and other R objects)</li>
</ul>
</div>
<div id="saving" class="section level3">
<h3><span class="header-section-number">1.3.3</span> Saving</h3>
<center>
<img src="src/img/RS-save.png" />
</center>
<ul>
<li><strong>Ensure that source files end with a new line</strong>: It’s a good practice to end coding file with a new line.</li>
<li><strong>Strip trailing horizontal whitespaces when saving</strong>: Remove whitespaces from blank line:</li>
</ul>
<div class="figure">
<img src="src/img/RS-remWhiteSpace.gif" alt="" />
<p class="caption">Effect of <code>Ctrl</code> + <code>S</code></p>
</div>
<ul>
<li><strong>Auto-save</strong>: New feature of <strong>R-Studio 1.3</strong></li>
</ul>
</div>
<div id="completion" class="section level3">
<h3><span class="header-section-number">1.3.4</span> Completion</h3>
<center>
<img src="src/img/RS-completion.png" />
</center>
<p>Completion help to write functions name and their parameters just by taping the first letters and the <code>tab</code> key:</p>
<div class="figure">
<img src="src/img/RS-completion.gif" alt="" />
<p class="caption">Press <code>tab</code> for automatic completion</p>
</div>
</div>
<div id="diagnostics" class="section level3">
<h3><span class="header-section-number">1.3.5</span> Diagnostics</h3>
<center>
<img src="src/img/RS-diagnostic.png" />
</center>
<ul>
<li><strong>Show diagnostics for R</strong>: Check to display alert messages in the margin of the editor when R code appears incorrect.</li>
</ul>
<div class="figure">
<img src="src/img/RS-diagnostic.gif" alt="" />
<p class="caption">Different diagnostic results</p>
</div>
</div>
</div>
<div id="spellchecking" class="section level2">
<h2><span class="header-section-number">1.4</span> Spellchecking</h2>
<div class="figure">
<img src="src/img/RS-spellCheck.png" alt="" />
<p class="caption">R-Studio 1.3 provide real time spellchecking</p>
</div>
</div>
<div id="export-your-configuration" class="section level2">
<h2><span class="header-section-number">1.5</span> Export your configuration</h2>
<p>From R-Studio 1.3, the configuration is saved at <code>~/.config/rstudio</code> (at least for Linux users). It is then easy to save and retrieve your personal configuration. This folder contain:</p>
<ul>
<li>The R-Studio settings: <code>rstudio-pref.json</code></li>
<li>The <a href="#snippets">snippets</a></li>
<li>The personal dictionary</li>
</ul>
</div>
</div>
<div id="working-with-r-studio" class="section level1">
<h1><span class="header-section-number">2</span> Working with R-Studio</h1>
<ul>
<li>Rstudio <strong>features</strong>:
<ul>
<li>click to see variables</li>
<li>keyboard shortcut</li>
<li>R-project (project options)
<ul>
<li><code>renv</code> package</li>
</ul></li>
<li>addins</li>
<li>Code Outline (navigate in code)</li>
</ul></li>
</ul>
<div id="panes" class="section level2 tabset tabset-fade tabset-pills">
<h2><span class="header-section-number">2.1</span> Panes</h2>
<div id="environment" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Environment</h3>
<div class="figure">
<img src="src/img/RSTools-Env.png" alt="" />
<p class="caption">Environment pane</p>
</div>
<ul>
<li><p>The Environment pane presents the variables defined in your environments. By default, it shows the global environment but you can select others (like those of the loaded packages).</p></li>
<li><p>The <img src="src/img/RSTools-EnvButton.png" alt="broom" /> button clear the workspace.</p></li>
<li><p>An easy and graphical way to import data of different types (text, excel, SAS …) is to use the <img src="src/img/RSTools-EnvButton2.png" alt="import Dataset" /> button. The corresponding R code will be written in the console, you can then copy/paste it in your scripts.</p></li>
<li><p>You can visualize the variables defined in your environments by clicking on them. This is a shortcut for a call to the R function <code>View()</code>.</p></li>
</ul>
<div class="figure">
<img src="src/img/RSTools-Env.gif" alt="" />
<p class="caption">Click on your R objects to view them in the main window</p>
</div>
</div>
<div id="file-browser" class="section level3">
<h3><span class="header-section-number">2.1.2</span> File browser</h3>
<div class="figure">
<img src="src/img/RSTools-file.png" alt="" />
<p class="caption">R-Studio file pane</p>
</div>
<p>By default, it is open at your current working directory. You can navigate through your file and set up a new working directory with the button <img src="src/img/RSTools-fileMore.png" />.</p>
<p>It’s quite convenient to manage the files directly from R-Studio. If you are working in a <a href="#Rproj">projects</a>, you can quickly access to your root folder with the <img src="src/img/RSTools-fileR.png" /> button.</p>
</div>
<div id="packages" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Packages</h3>
<div class="figure">
<img src="src/img/RSTools-pkg.png" alt="" />
<p class="caption">R-Studio package pane</p>
</div>
<p>In the package pane, you can <strong>install new packages</strong>. It’s particularly convenient when you don’t know the exact package name.</p>
<p><img src="src/img/RSTools-pkgInst.png" /></p>
<p>With the update button you can also check if some of your packages are not up to date. With the <img src="src/img/RSTools-pkgUpButton.png" /> button, you can access to <strong>the news file</strong> of these packages to see what is new. (See also section <a href="#cranalert">CRANalert</a> for a notifier tools about updated packages).</p>
<p><img src="src/img/RSTools-pkgUp.png" /></p>
</div>
<div id="jobs" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Jobs</h3>
<div class="figure">
<img src="src/img/RSTools-jobs2.png" alt="" />
<p class="caption">Jobs pane with 2 finished jobs</p>
</div>
<p>Click on the <img src="src/img/RSTools-jobsButton.png" alt="start local job" /> button or source a file as a local job to run an R script in an background R session.</p>
<p><img src="src/img/RSTools-jobs4.png" /></p>
<p>By this way you can continue to work on R-Studio with an available console while a script is running.</p>
<div class="figure">
<img src="src/img/RSTools-jobs.png" alt="" />
<p class="caption">Jobs pane with a running job showing some outputs</p>
</div>
<div class="note">
<p>You can find more information on this <a href="https://blog.rstudio.com/2019/03/14/rstudio-1-2-jobs/">R-Studio blog post</a>.</p>
</div>
<!-- ### Build -->
<!-- ![Build pane](src/img/RSTools-Build.png) -->
<!-- When you develop a R package, you can manage your test / checks / build in the pane.-->
</div>
<div id="git" class="section level3">
<h3><span class="header-section-number">2.1.5</span> Git</h3>
<div class="figure">
<img src="src/img/RSTools-Git.png" alt="" />
<p class="caption">Build pane</p>
</div>
<p>If you work with Git in your R-Project, you can run the main git commands in this pane:</p>
<ul>
<li>Stage / commit</li>
<li>Pull / Push</li>
<li>View diff and history</li>
<li>Create / checkout branches</li>
</ul>
</div>
<div id="tutorial" class="section level3">
<h3><span class="header-section-number">2.1.6</span> Tutorial</h3>
<div class="note">
<p>It7s a new feature included in R-Studio 1.3</p>
</div>
<p>Some R packages provides tutorials thanks to the <a href="https://rstudio.github.io/learnr/"><code>learnr</code></a> package. You can try them in this pane.</p>
<div class="figure">
<img src="src/img/RSTools-tuto.png" alt="" />
<p class="caption">Data basics tutorial running in the pane</p>
</div>
</div>
</div>
<div id="Rproj" class="section level2">
<h2><span class="header-section-number">2.2</span> R-Project</h2>
<p>When you work, <del>I hope</del> you keep all your files associated with a project in one specific directory in your computer. R-Studio provide a built-in support for this via “projects”.</p>
<p>You can find some information about R-Project in this <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">R-Studio support article</a> or at this <a href="https://r4ds.had.co.nz/workflow-projects.html#rstudio-projects"><em>R for Data Science</em> section</a>.</p>
<div id="advantages" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Advantages</h3>
<p>The main advantages to work with R-Projects are:</p>
<ul>
<li><p>When a R-Project is open, the current working directory is automatically set to the project directory. A R-Project can then be <strong>shared across multiple users</strong> on different computers without thinking about setting the working directory.</p></li>
<li><p>When a R-Project is open, you get back to where you left off: The <strong>previously opened files are restored</strong> into the editor tabs such as the command history (if it had been saved). Even the files that had <em>never</em> been saved (named <code>Untitled1</code> in the editor) are restored.</p></li>
<li><p>You can use Git from R-Studio.</p></li>
</ul>
<div class="note">
<p>Of course the global environment is not restored if R-Studio is setup correctly as explained in this <a href="#generalSettings">section</a>.</p>
</div>
</div>
<div id="create-r-project" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Create R-Project</h3>
<p>You can create a new R-Project either by clicking on <code>File -&gt; New Project...</code> or on the <img src="src/img/RS-project.png" alt="project" /> button.</p>
<p>You can then choose to create it in an existing directory, or to create a new one. In this case, R-Studio provides different templates: “R package”, “Shiny Web Application”, “Plumber API” … After creation, the directory will already contain some files and folder.</p>
<div class="figure">
<img src="src/img/RS-project2.png" alt="" />
<p class="caption">Differents project templates</p>
</div>
<p>There is no template for data analysis projects, but a simple structure can be:</p>
<pre><code>## projectExample/
## ├── analysis.R
## ├── data
## ├── output
## ├── projectExample.Rproj
## └── src</code></pre>
</div>
<div id="how-it-works" class="section level3">
<h3><span class="header-section-number">2.2.3</span> How it works</h3>
<p>R project is a directory containing a <code>.Rproj</code> file which can be open by R-Studio. When you open a <code>.Rproj</code> file, the following happens:</p>
<ul>
<li>A new R session (process) is started</li>
<li>The <code>.Rprofile</code> file in the project’s main directory (if any) is sourced by R</li>
<li>The <code>.RData</code> file in the project’s main directory is loaded (if project options indicate that it should be loaded).</li>
<li>The <code>.Rhistory</code> file in the project’s main directory is loaded into the R-Studio history pane (and used for Console Up/Down arrow command history).</li>
<li>The current working directory is set to the project directory.</li>
<li>Previously edited source documents are restored into editor tabs</li>
<li>Other R-Studio settings (e.g. active tabs, splitter positions, etc.) are restored to where they were the last time the project was closed.</li>
</ul>
<p>The <code>.Rproj</code> file is a text file (you can try to open it with a text editor) containing the project settings. These settings can be modified in <code>Tools -&gt; Project Options...</code>. It is important to know that <strong>these settings have priority</strong> over the standard R-Studio settings.</p>
<h2>
</h2>
<div class="note">
<ul>
<li><p>If your R project is included in a Google Drive folder, you can encounter some troubles when saving your files.</p></li>
<li><p>Even if the <code>.Rproj.user</code> folder is not so big, it can contain a lot of small files. It can then take a long time be synchronized on clouds services.</p></li>
</ul>
</div>
</div>
</div>
<div id="keyboard-shortcuts-and-useful-command" class="section level2">
<h2><span class="header-section-number">2.3</span> Keyboard shortcuts and useful command</h2>
<p>R-Studio provide a lot of <strong>very useful</strong> commands accessible from the menu bar (<code>File</code>, <code>Edit</code>, <code>Code</code>, <code>Session</code> … ).</p>
<p>These commands are linked to keyboard shortcuts. Even if it is not easy to learn, it will significantly improve your productivity.</p>
<p>The default shortcuts can be modify through: <code>Tools -&gt; Modify keyboard shortcuts...</code></p>
<p>The list below is just a non-exhaustive list of my favorite shortcuts / R-Studio functionality.</p>
<div class="note">
<ul>
<li>Remember, if you are doing an annoying and repetitive task, there is probably a shortcut for that!</li>
</ul>
</div>
<div id="basic" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Basic</h3>
<p>These shortcuts are similar to those of other softwares.</p>
<ul>
<li><p><code>Ctrl</code> + <code>Z</code> : Undo</p></li>
<li><p><strong><code>Ctrl</code> + <code>Shift</code> + <code>Z</code></strong> : Redo (this is not the usual convention!)</p></li>
<li><p><code>Ctrl</code> + <code>O</code> : <strong>O</strong>pen file</p></li>
<li><p><code>Ctrl</code> + <code>A</code> : Select <strong>a</strong>ll</p></li>
<li><p><code>Ctrl</code> + <code>S</code> : <strong>S</strong>ave file</p></li>
<li><p><code>Ctrl</code> + <code>F</code> : <strong>F</strong>ind in the current file</p></li>
<li><p><strong><code>Ctrl</code> + <code>Shit</code> + <code>F</code></strong>: <strong>F</strong>ind in files (to search across multiple files)</p></li>
<li><p><strong><code>Ctrl</code> + <code>w</code></strong> : Close tab</p></li>
<li><p><strong><code>Ctrl</code> + <code>Tab</code></strong> : Go to next tab</p></li>
<li><p><code>Ctrl</code> + <code>Q</code> : Quit R-Studio</p></li>
<li><p><code>Tab</code> : Indent / Autocompletion</p></li>
<li><p><code>Shift</code> + <code>Tab</code> : Outdent</p></li>
<li><p><strong><code>Ctrl</code> + <code>Shift</code> + <code>F10</code></strong> : Restart R session. <strong>You should do it quite often !</strong></p></li>
<li><p><code>Ctrl</code> + <code>Shift</code> + <code>H</code> : <del>Choose working directory</del> Not needed because you are working in a R-Studio project. 😉</p></li>
</ul>
</div>
<div id="help" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Help</h3>
<ul>
<li><p><strong><code>Alt</code> + <code>Shift</code> + <code>K</code></strong> : Show <strong>k</strong>eyboard shortcuts</p></li>
<li><p><code>F1</code> : Show function help</p></li>
<li><p><strong><code>Ctrl</code> + <code>Click</code></strong> : (on a function) Go to function definition.</p></li>
</ul>
</div>
<div id="run-code" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Run code</h3>
<ul>
<li><p><code>Ctrl</code> + <code>Enter</code> : Run selected lines</p></li>
<li><p><code>Ctrl</code> + <code>Alt</code> + <code>B</code>/<code>E</code> : Run code from <strong>B</strong>egining to line or from line to <strong>E</strong>nd</p></li>
<li><p><code>Ctrl</code> + <code>Alt</code> + <code>Shift</code> + <code>P</code> : Profile selected lines (see: <a href="#profiling">profiling section</a>)</p></li>
</ul>
</div>
<div id="editor" class="section level3">
<h3><span class="header-section-number">2.3.4</span> Editor</h3>
<ul>
<li><p><strong><code>Alt</code> + <code>-</code></strong> : insert <code>&lt;-</code></p></li>
<li><p><code>Ctrl</code> + <code>Shift</code> + <code>M</code> : insert a pipe <code>%&gt;%</code></p></li>
<li><p><code>Ctrl</code> + <code>Shift</code> + <code>C</code> : (un)<strong>C</strong>omment code</p></li>
</ul>
<div class="figure">
<img src="src/img/KS-comment.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>Shift</code> + <code>C</code></p>
</div>
<hr />
<ul>
<li><code>Ctrl</code> + <code>Shift</code> + <code>/</code> : Reflow comment</li>
</ul>
<div class="figure">
<img src="src/img/KS-comment2.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>Shift</code> + <code>/</code></p>
</div>
<hr />
<ul>
<li><code>Ctrl</code> + <code>I</code> : Auto <strong>i</strong>ndentation</li>
<li><code>Ctrl</code> + <code>Shift</code> + <code>A</code> : Auto reformat code (with format convention)</li>
</ul>
<div class="row">
<div class="col-md-6">
<div class="figure">
<img src="src/img/KS-autoIndent.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>I</code></p>
</div>
</div>
<div class="col-md-6">
<div class="figure">
<img src="src/img/KS-autoFormat.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>Shift</code> + <code>A</code></p>
</div>
</div>
</div>
<hr />
<ul>
<li><strong><code>Ctrl</code> + <code>P</code></strong>: Jump to Matching Brace/Paren. Very useful to <strong>debug “Brace related errors”</strong></li>
</ul>
<div class="figure">
<img src="src/img/KS-CtrlP.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>P</code></p>
</div>
<hr />
<ul>
<li><code>Ctrl</code> + <code>Alt</code> + <code>Up</code>/<code>Down</code> : Add cursor above or below</li>
<li><code>Ctrl</code> + <code>Alt</code> + <code>Click</code> : add a new cursor (Useful on Windows when you copy/paste file path and you want to double the <code>/</code>)</li>
</ul>
<div class="figure">
<img src="src/img/KS-CtrlAltClick.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>Alt</code> + <code>Click</code></p>
</div>
<hr />
<ul>
<li><strong><code>Ctrl</code> + <code>Alt</code> + <code>Shift</code> + <code>M</code></strong>: Rename in scope. It is much more intelligent than a simple “find and replace”. On the example below, neither the variable <code>a</code> outside the function nor the variable <code>alex</code> is affected.</li>
</ul>
<div class="figure">
<img src="src/img/KS-rename.gif" alt="" />
<p class="caption"><code>Ctrl</code> + <code>Alt</code> + <code>Shift</code> + <code>M</code></p>
</div>
<hr />
</div>
<div id="r-markdown" class="section level3">
<h3><span class="header-section-number">2.3.5</span> R markdown</h3>
<ul>
<li><strong><code>Ctrl</code> + <code>Shit</code> + <code>K</code></strong>: <strong>K</strong>nit document</li>
<li><code>Shit</code> + <code>Tab</code> : Autocompletion / snippets</li>
<li><strong><code>Ctrl</code> + <code>Alt</code> + <code>I</code></strong> : <strong>I</strong>nsert a new chunk</li>
<li><strong><code>Ctrl</code> + <code>Shift</code> + <code>Enter</code></strong>: Run current chunk</li>
<li><code>Ctrl</code> + <code>Alt</code> + <code>P</code> : Run all <strong>p</strong>revious chunks</li>
</ul>
</div>
</div>
<div id="addins" class="section level2">
<h2><span class="header-section-number">2.4</span> Addins</h2>
<p>Some R packages includes some R-Studio addins.</p>
<p>You can launch an addin using the <img src="src/img/RS-AddinsButton.png" alt="addin" /> button.</p>
<p>These addins provides new functionality to R studio like: <a href="https://github.com/daattali/colourpicker">Color picker</a>, <a href="https://github.com/MilesMcBain/datapasta">create data.frame from clipboard</a>…</p>
<div class="figure">
<img src="src/img/RS-Addins.png" alt="" />
<p class="caption">Addins can be installed with “Browse RStudio addins”</p>
</div>
</div>
</div>
<div id="rprofile-file" class="section level1">
<h1><span class="header-section-number">3</span> <code>.Rprofile</code> file</h1>
<p>The <code>.Rprofile</code> file can be used to customize the environment at the startup of R. This file should be place in the your HOME directory, or inside a folder of a R-project. In this case, the one inside the project take precedence over the other.</p>
<p>When R starts, it automatically sources the <code>.Rprofile</code> file. So it can be used to setup some R options like: <code>options(max.print = 200)</code> to reduce the number of printed lines or <code>options("scipen" = 999)</code> to disabled the scientific notation.</p>
<p>There is also two interesting functions: <code>.First( )</code> which will be run at the start of the R session and <code>.Last( )</code> at the end of the session.</p>
<p>You can try to copy this this line in your <code>.Rprofile</code> file:</p>
<pre class="r"><code>.First &lt;- function(){
  cat(&quot;Welcome&quot;, Sys.info()[&quot;user&quot;], &quot;!\n&quot;)
}</code></pre>
<div class="NOTE">
<p>You should not modify options that can have an effect on the R behavior ! For example setting <code>options(stringsAsFactors = TRUE/FALSE)</code> in your <code>.Rprofile</code> file is a bad idea. Indeed, your codes might not run well on another computer.</p>
</div>
</div>
<div id="snippets" class="section level1">
<h1><span class="header-section-number">4</span> Snippets</h1>
<p>Code snippets are text macros that insert a piece of code.</p>
<p>Some are already installed in R-Studio like:</p>
<div class="row">
<div class="col-md-6">
<div class="figure">
<img src="src/img/Snip-for.gif" alt="" />
<p class="caption"><code>for</code> snippet</p>
</div>
</div>
<div class="col-md-6">
<div class="figure">
<img src="src/img/Snip-if.gif" alt="" />
<p class="caption"><code>if</code> snippet</p>
</div>
</div>
</div>
<p>You can also create <strong>your own snippets</strong>.</p>
<p>Instead of copy pasting your work from other project it can be interesting to create a snippet. For example I use some snippet to generate the code of <a href="https://plotly.com/r/"><code>plotly</code></a> interactive graph. You can see below another example of a snippet generating a custom color palette:</p>
<div class="figure">
<img src="src/img/Snip-myColor.gif" alt="" />
<p class="caption">snippet to generate a color palette</p>
</div>
<p>You can find more information in this <a href="https://support.rstudio.com/hc/en-us/articles/204463668-Code-Snippets?version=1.3.957&amp;mode=desktop">Rstudio support article</a></p>
<div id="create-a-custom-snippet" class="section level2">
<h2><span class="header-section-number">4.1</span> Create a custom snippet</h2>
<p>To create a new snippet, go to: <code>Tools -&gt; Global Options...</code> and then <code>Code</code> and click on the <img src="src/img/Snip-editButton.png" alt="edit snippet" /> button.</p>
<p>You can write your custom snippet in the opened window.</p>
<p>The syntax is quite simple:</p>
<pre class="r fold-show"><code>snippet for
    for (${1:variable} in ${2:vector}) {
        ${0}
    }</code></pre>
<p>It start with <code>snippet</code> followed by the name of the snippet. The contents of the snippet should be written below with an indentation.</p>
<p>Variables of the snippet can be defined using: <code>${X:varname}</code>, with <code>X</code> a number. all variable with the same number <code>X</code> will be written together when the snippet is used.</p>
<p>You can also run R code in your snippet by including it inside: <code>`r `</code> . For example this snippet return the current date:</p>
<pre class="r fold-show"><code>snippet date
  `r Sys.Date()`</code></pre>
<div class="figure">
<img src="src/img/Snip-date.gif" alt="" />
<p class="caption">a snippet writing the current date</p>
</div>
<div class="note">
<ul>
<li>The <code>$</code> sign is a special character for snippet definition. So in order to included a dollar sign in a snippet, escape the character with a slash: <code>\$</code>.</li>
</ul>
</div>
</div>
</div>
<div id="r-code-optimisation" class="section level1">
<h1><span class="header-section-number">5</span> R code optimisation</h1>
<div id="microbenchmark" class="section level2">
<h2><span class="header-section-number">5.1</span> Microbenchmark</h2>
<p>To compare the time of pieces of code, the package <a href="https://CRAN.R-project.org/package=microbenchmark"><code>microbenchmark</code></a> is very useful.</p>
<pre class="r fold-show"><code>library(microbenchmark)

n &lt;- 10000
print(microbenchmark(
    test1 = {
      x &lt;- list()
      for (i in 1:n) {
        x[[length(x) + 1]] &lt;- rnorm(1)
      }
    },
    test2 = {
      x &lt;- vector(mode = &quot;list&quot;, n)
      for (i in 1:n) {
        x[[i]] &lt;- rnorm(1)
      }
    },
    test3 = {
      x &lt;- lapply(rep(1,n), rnorm)
    },
    test4 = {
      x &lt;- as.list(rnorm(n))
    }
))</code></pre>
<pre><code>## Unit: microseconds
##   expr       min         lq      mean    median        uq       max neval
##  test1 26180.884 30462.1595 34546.003 33762.761 37437.480 56602.397   100
##  test2 19468.458 21332.6315 24368.231 23531.307 26809.575 35082.366   100
##  test3 19100.393 21571.8170 26162.689 24770.453 27828.136 97228.736   100
##  test4   760.297   858.6945  1083.293   935.319  1189.496  2443.766   100</code></pre>
</div>
<div id="profiling" class="section level2">
<h2><span class="header-section-number">5.2</span> Profiling</h2>
<p>R-Studio integrate a profiling tool using the <a href="https://CRAN.R-project.org/package=profvis"><code>profvis</code></a> package. This tool execute a script and display the time and memory allocation of each line and R functions.</p>
<p>This tool can be very useful to detect the slowest part of your code to improve them in priority.</p>
<div class="figure">
<img src="src/img/RS-profile.png" alt="" />
<p class="caption">Profiling results of a simple example</p>
</div>
</div>
</div>
<div id="r-markdown-1" class="section level1">
<h1><span class="header-section-number">6</span> R-Markdown</h1>
<div id="rmd-templates" class="section level2">
<h2><span class="header-section-number">6.1</span> rmd templates</h2>
<ul>
<li>rmd templates</li>
<li>Appendix <code>sessionInfo()</code></li>
</ul>
</div>
<div id="publish-r-markdown" class="section level2">
<h2><span class="header-section-number">6.2</span> Publish R-Markdown</h2>
</div>
</div>
<div id="some-useful-r-functions" class="section level1">
<h1><span class="header-section-number">7</span> Some useful R functions:</h1>
<div id="saverds" class="section level2">
<h2><span class="header-section-number">7.1</span> <code>saveRDS</code></h2>
<p>An R object (for example the result of a long calculation) can be saved using the function <code>save()</code> and then load back with the function <code>load()</code>. The problem with these function is that it saves both the objects and their names in the same file. So we cannot reset the object name.</p>
<p>We don’t have this problem with the functions <code>saveRDS()</code> and <code>readRDS()</code>:</p>
<pre class="r"><code>x &lt;- rnorm(10)
saveRDS(x, &quot;rnorm10.RDS&quot;)

y &lt;- readRDS(&quot;rnorm10.RDS&quot;)
identical(x, y)</code></pre>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="dput" class="section level2">
<h2><span class="header-section-number">7.2</span> <code>dput()</code></h2>
<p>This function write the “source code” of an R object:</p>
<pre class="r"><code>dput(head(iris))</code></pre>
<pre><code>## structure(list(Sepal.Length = c(5.1, 4.9, 4.7, 4.6, 5, 5.4), 
##     Sepal.Width = c(3.5, 3, 3.2, 3.1, 3.6, 3.9), Petal.Length = c(1.4, 
##     1.4, 1.3, 1.5, 1.4, 1.7), Petal.Width = c(0.2, 0.2, 0.2, 
##     0.2, 0.2, 0.4), Species = structure(c(1L, 1L, 1L, 1L, 1L, 
##     1L), .Label = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), class = &quot;factor&quot;)), row.names = c(NA, 
## 6L), class = &quot;data.frame&quot;)</code></pre>
</div>
<div id="browser" class="section level2">
<h2><span class="header-section-number">7.3</span> <code>browser()</code></h2>
<p>This function interrupt the execution of an expression lunch the “debug mode”.</p>
<p>It is very usefull to debug code in a “<code>apply</code>” function, in a Shiny application, Plumber API …</p>
<pre class="r"><code>sapply(rep(1,3), function(x){
  browser()
  rnorm(x)
})</code></pre>
</div>
</div>
<div id="external-ressourses" class="section level1">
<h1><span class="header-section-number">8</span> External ressourses</h1>
<div id="cranalert" class="section level2">
<h2><span class="header-section-number">8.1</span> CRANalert</h2>
<h1>
Appendix
</h1>
<p>Source code of this document is available on <a href="https://github.com/juliendiot42/RTips-Tricks">GitHub</a>.</p>
<pre class="r"><code>options(max.print = 10000)
cat(&quot;Document generated in:\n&quot;)
print(Sys.time() - knitStartTime)
if (Sys.info()[&quot;sysname&quot;] == &quot;Linux&quot;) {
  cat(&quot;\nCPU: &quot;)
  cat(unique(system(&quot;awk -F&#39;: &#39; &#39;/model name/{print $2}&#39; /proc/cpuinfo&quot;, intern = T)))
  cat(&quot;\nMemory total size: &quot;)
  cat(as.numeric(system(&quot;awk &#39;/MemTotal/ {print $2}&#39; /proc/meminfo&quot;, intern = T))*10^(-6), &quot;GB&quot;)
}
cat(&quot;\n\n\nSession information:\n&quot;)
print(sessionInfo(), locale = FALSE)</code></pre>
<pre><code>## Document generated in:
## Time difference of 9.135066 secs
## 
## CPU: Intel(R) Core(TM) i5-10210U CPU @ 1.60GHz
## Memory total size: 7.860076 GB
## 
## 
## Session information:
## R version 4.0.0 (2020-04-24)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 18.04.4 LTS
## 
## Matrix products: default
## BLAS:   /usr/local/lib/R/lib/libRblas.so
## LAPACK: /usr/local/lib/R/lib/libRlapack.so
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] microbenchmark_1.4-7 emo_0.0.0.9000       fs_1.4.1            
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.4.6      lubridate_1.7.8   crayon_1.3.4      digest_0.6.25    
##  [5] assertthat_0.2.1  magrittr_1.5      evaluate_0.14     rlang_0.4.6      
##  [9] stringi_1.4.6     fontawesome_0.1.0 generics_0.0.2    rmarkdown_2.1    
## [13] tools_4.0.0       stringr_1.4.0     glue_1.4.0        purrr_0.3.4      
## [17] xfun_0.13         yaml_2.2.1        compiler_4.0.0    htmltools_0.4.0  
## [21] knitr_1.28        sass_0.2.0</code></pre>
</div>
</div>

&nbsp;
<!-- Add icon/font library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">

<div class="footer" style="font-family: Lato">
    <hr />
    <p style="text-align: center;"><a href="https://github.com/juliendiot42">Julien Diot</a></p>
    <p style="text-align: center;"><span style="color: #808080;"><em>juliendiot@ut-biomet.org</em></span></p>

    <!-- Add font awesome icons -->
    <p style="text-align: center;">
        <a href="https://github.com/juliendiot42" class="fab fa-github"></a>
        <a href="https://www.linkedin.com/in/julien-diot-949592107/" class="fab fa-linkedin"></a>
        <a href="https://orcid.org/0000-0002-8738-2034" class="fab fa-orcid"></a>
        <a href="https://keybase.io/juliendiot" class="fab fa-keybase"></a>
    </p>
</div>
&nbsp;


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
